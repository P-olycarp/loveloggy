<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Clear LoveLoggy Demo Data</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>body{font-family:sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;background:#f7f5f2} .card{background:white;padding:24px;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,0.08);max-width:420px;text-align:center}</style>
</head>
<body>
  <div class="card">
    <h2>Clear LoveLoggy Local Data</h2>
    <p style="color:#666;margin:10px 0">This will remove all local demo data stored in your browser (messages, events, gallery, settings). It does not affect server data (none).</p>
    <button id="clearBtn" style="background:#007AFF;color:#fff;border:none;padding:10px 18px;border-radius:8px;cursor:pointer">Clear local data</button>
    <p id="status" style="margin-top:12px;color:#444"></p>
  </div>

  <script src="src/auth.js"></script>
  <script>
    document.getElementById('clearBtn').addEventListener('click', ()=>{
      if(!confirm('Remove all local LoveLoggy data? This cannot be undone.')) return;
      const status = document.getElementById('status');
      try{
        if(window.LoveLoggyAuth && LoveLoggyAuth.resetAllData){
          LoveLoggyAuth.resetAllData();
        }
  // also remove any legacy keys
  ['lovelogg_user','lovelogg_chat','lovelogg_events','lovelogg_goals','lovelogg_gallery','lovelogg_entries','lovelogg_dates','lovelogg_resolutions','lovelogg_creds','lovelogg_current'].forEach(k=>localStorage.removeItem(k));
  // and normalized keys
  ['loveloggy_user','loveloggy_chat','loveloggy_events','loveloggy_goals','loveloggy_gallery','loveloggy_entries','loveloggy_dates','loveloggy_resolutions','loveloggy_creds','loveloggy_current'].forEach(k=>localStorage.removeItem(k));
        status.textContent = 'Local data cleared. Redirecting to the app...';
        setTimeout(()=> window.location.href = 'index.html', 1200);
      }catch(e){
        status.textContent = 'Error clearing data: '+(e.message||e);
      }
    });
  </script>
</body>
</html>